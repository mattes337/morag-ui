services:
    # Next.js Application
    app:
        build:
            context: .
            dockerfile: Dockerfile
        container_name: morag-ui
        restart: unless-stopped
        ports:
            - '3000:3000'
        env_file:
            - .env
        environment:
            - NODE_ENV=production
        volumes:
            - ./uploads:/app/uploads # For file uploads if needed
        labels:
          - "traefik.enable=true"
          - "traefik.http.routers.morag.rule=Host(`morag.drydev.de`)"
          - "traefik.http.routers.morag.entrypoints=websecure"
          - "traefik.http.routers.morag.tls.certresolver=letsencrypt"
          - "traefik.http.routers.morag.middlewares=secure-headers@file"
          - "traefik.http.services.morag.loadbalancer.server.port=3000"
