'use client'; import { Document } from '../../types'; import { useApp } from '../../contexts/AppContext'; interface DocumentDetailViewProps { document: Document; onBack: () => void; onReingest: (document: Document) => void; onSupersede: (document: Document) => void; onDelete: (document: Document) => void; } export function DocumentDetailView({ document, onBack, onReingest, onSupersede, onDelete, }: DocumentDetailViewProps) { const { setShowReingestConfirmDialog, setDocumentToReingest, setShowDeleteConfirmDialog, setDocumentToDelete, } = useApp(); const handleReingestClick = () => { setDocumentToReingest(document); setShowReingestConfirmDialog(true); }; const handleDeleteClick = () => { setDocumentToDelete(document); setShowDeleteConfirmDialog(true); }; const getStateColor = (state: string) => { switch (state) { case 'pending': return 'bg-yellow-100 text-yellow-800'; case 'ingesting': return 'bg-blue-100 text-blue-800'; case 'ingested': return 'bg-green-100 text-green-800'; case 'deprecated': return 'bg-gray-100 text-gray-800'; case 'deleted': return 'bg-red-100 text-red-800'; default: return 'bg-gray-100 text-gray-800'; } }; const renderDocumentEmbed = () => { const docType = document.type.toLowerCase(); const docName = document.name.toLowerCase(); // For testing purposes, using publicly available files if (docType === 'pdf' || docName.includes('.pdf')) { // Using a sample PDF from Mozilla const pdfUrl = 'https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf'; return ( <div className="w-full h-96 border border-gray-300 rounded-lg overflow-hidden" data-oid="co2.27c" > <iframe src={`https://mozilla.github.io/pdf.js/web/viewer.html?file=${encodeURIComponent(pdfUrl)}`} className="w-full h-full" title={`PDF Viewer - ${document.name}`} data-oid="kpjgxk0" /> </div> ); } if (docType === 'youtube' || docName.includes('youtube')) { // Using a sample educational YouTube video const videoId = 'dQw4w9WgXcQ'; // Sample video ID return ( <div className="w-full h-96 border border-gray-300 rounded-lg overflow-hidden" data-oid="v96mctu" > <iframe src={`https://www.youtube.com/embed/${videoId}`} className="w-full h-full" title={`YouTube Video - ${document.name}`} allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen data-oid="bo11591" /> </div> ); } if (docType === 'website' || docType === 'url' || docName.includes('http')) { // Using a sample website const websiteUrl = 'https://example.com'; return ( <div className="w-full h-96 border border-gray-300 rounded-lg overflow-hidden" data-oid="y9c.0:z" > <iframe src={websiteUrl} className="w-full h-full" title={`Website - ${document.name}`} sandbox="allow-scripts allow-same-origin" data-oid="kq8lcz:" /> </div> ); } // Default fallback for other document types return ( <div className="w-full h-96 border border-gray-300 rounded-lg flex items-center justify-center bg-gray-50" data-oid="l_305az" > <div className="text-center" data-oid="rid8ot5"> <div className="text-4xl mb-4" data-oid="3pn0xzk"> üìÑ </div> <p className="text-gray-600" data-oid="vh-ctm9"> Preview not available for this document type </p> <p className="text-sm text-gray-500 mt-2" data-oid="c3iw-i1"> Type: {document.type} </p> </div> </div> ); }; return ( <div className="space-y-6" data-oid="4eif1kp"> {/* Header */} <div className="flex justify-between items-start" data-oid="8i9istz"> <div data-oid="bmoxt6e"> <button onClick={onBack} className="text-blue-600 hover:text-blue-800 text-sm mb-2" data-oid=".z66ulw" > ‚Üê Back to Documents </button> <h1 className="text-3xl font-bold text-gray-900" data-oid="19nviv4"> {document.name} </h1> <div className="flex items-center space-x-4 mt-2" data-oid="x36zwtm"> <span className={`px-3 py-1 text-sm font-medium rounded-full ${getStateColor(document.state)}`} data-oid="-po277h" > {document.state} </span> <span className="text-sm text-gray-500" data-oid="x8ksgv:"> Type: {document.type} </span> <span className="text-sm text-gray-500" data-oid="wcrymxd"> Version: v{document.version} </span> <span className="text-sm text-gray-500" data-oid="9h_u3dj"> Uploaded: {document.uploadDate} </span> </div> </div> {/* Action Buttons */} <div className="flex space-x-3" data-oid="cgif_h-"><button onClick={handleReingestClick} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" disabled={document.state === 'ingesting'} data-oid="xuer5_2" > Reingest </button> <button onClick={() => onSupersede(document)} className="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors" disabled={document.state === 'deprecated' || document.state === 'deleted'} data-oid="zaorvlt" > Supersede </button><button onClick={handleDeleteClick} className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors" disabled={document.state === 'deleted'} data-oid="cu6uamh" > Delete </button> </div> </div> {/* Document Stats */} <div className="grid grid-cols-1 md:grid-cols-3 gap-6" data-oid="d5.b0c."> <div className="bg-white p-6 rounded-lg border border-gray-200" data-oid="g3ez6xv"> <h3 className="text-lg font-semibold text-gray-900 mb-2" data-oid="z4ijzeo"> Processing Stats </h3> <div className="space-y-2" data-oid="uzme_17"> <div className="flex justify-between" data-oid="loyds-2"> <span className="text-gray-600" data-oid="_ee_5j6"> Chunks: </span> <span className="font-medium" data-oid="cm6yx5."> {document.chunks} </span> </div> <div className="flex justify-between" data-oid=":1do4ov"> <span className="text-gray-600" data-oid="arbzn4g"> Quality: </span> <span className="font-medium" data-oid="lmtq319"> {(document.quality * 100).toFixed(1)}% </span> </div> <div className="flex justify-between" data-oid="mnu85yg"> <span className="text-gray-600" data-oid="-:0u3yo"> Version: </span> <span className="font-medium" data-oid="uzb8w:y"> v{document.version} </span> </div> </div> </div> <div className="bg-white p-6 rounded-lg border border-gray-200" data-oid="_0z6unx"> <h3 className="text-lg font-semibold text-gray-900 mb-2" data-oid="goxug-r"> Document Info </h3> <div className="space-y-2" data-oid="go0fq1l"> <div className="flex justify-between" data-oid="1hds791"> <span className="text-gray-600" data-oid="p_8se1i"> Type: </span> <span className="font-medium" data-oid="b248m3x"> {document.type} </span> </div> <div className="flex justify-between" data-oid="w:.7ncp"> <span className="text-gray-600" data-oid="2p.t12e"> State: </span> <span className={`px-2 py-1 text-xs font-medium rounded-full ${getStateColor(document.state)}`} data-oid="5_xdxd." > {document.state} </span> </div> <div className="flex justify-between" data-oid="2p8r_sx"> <span className="text-gray-600" data-oid="agn6:py"> Uploaded: </span> <span className="font-medium" data-oid="z:wwqk6"> {document.uploadDate} </span> </div> </div> </div> <div className="bg-white p-6 rounded-lg border border-gray-200" data-oid="o:nv7w2"> <h3 className="text-lg font-semibold text-gray-900 mb-2" data-oid="tbn-4kn"> Actions </h3> <div className="space-y-2" data-oid="nvbcliu"><button onClick={handleReingestClick} className="w-full text-left px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded" disabled={document.state === 'ingesting'} data-oid="2pao3nu" > üîÑ Reingest Document </button> <button onClick={() => onSupersede(document)} className="w-full text-left px-3 py-2 text-sm text-yellow-600 hover:bg-yellow-50 rounded" disabled={ document.state === 'deprecated' || document.state === 'deleted' } data-oid=".1f1009" > üìù Supersede Version </button><button onClick={handleDeleteClick} className="w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded" disabled={document.state === 'deleted'} data-oid="3n4:qu:" > üóëÔ∏è Delete Document </button> </div> </div> </div> {/* Document Preview */} <div className="bg-white p-6 rounded-lg border border-gray-200" data-oid="_n0jz.a"> <h3 className="text-lg font-semibold text-gray-900 mb-4" data-oid=".nlphdk"> Document Preview </h3> {renderDocumentEmbed()} </div> </div> ); }